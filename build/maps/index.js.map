{"version":3,"sources":["index.js"],"names":["require","TabsMenus","props","myProps","propsData","data","forEach","className","item","itemClass","replace","index","select","path","push","Tabs","state","start","selectData","showMenu","prepaireData","bind","createMenu","getContent","that","menuData","contentData","ii","title","idf","parent","attr","itemMethod","tabItemMethod","content","saxer","append","MenuData","ContentData","menu_data","get","navItemMethod","tapItemMethod","treeHeader","treeFooter","id","contents","stateContents","_contents","selectContent","mulitple","jsxMenu","myJsxMenu","thisConfig","config","iscrollConfig","IscrollTreeMenu","Aotoo","iscroll","cls","tabClass","boxes_cls","React","Component","extend","params","utile","dft","undefined","merge","Action","UPDATE","ostate","opts","curState","SELECT","cb","setTimeout","myTabs","setProps","options"],"mappings":"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","file":"../index.js","sourcesContent":["require('aotoo-mixins-iscroll')\n\nconst TabsMenus = (props) => {\n  let myProps = {...props}\n  const propsData = []\n  myProps.data.forEach( item => {\n    const className = (item.itemClass||'').replace(/ *select/g, '')\n    if (item.index == myProps.select || item.path == myProps.select) {\n      item.itemClass = className ? className + \" select\" : \"select\"\n    } else {\n      item.itemClass = className.replace(/( *)select/g, '')\n    }\n    propsData.push(item)\n    return item\n  })\n  myProps.data = propsData\n  return <Aotoo.tree {...myProps}/>\n}\n\nexport class Tabs extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      data: this.props.data||[],\n      select: this.props.select||this.props.start||0,\n      selectData: {},\n      showMenu: this.props.showMenu,\n    }\n\n    this.prepaireData = this.prepaireData.bind(this)\n    this.createMenu = this.createMenu.bind(this)\n    this.getContent = this.getContent.bind(this)\n  }\n\n  componentWillMount() {\n    this.prepaireData(this.state)\n  }\n  \n  prepaireData(state){\n    const that = this\n    const props = this.props\n    \n    let menuData = []\n    let contentData = []\n    state.data.forEach( (item, ii) => {\n      // 准备菜单数据\n      menuData.push({\n        index: ii,\n        path: item.path,\n        title: item.title,\n        idf: item.idf,\n        parent: item.parent,\n        attr: item.attr,\n        itemClass: props.itemClass,\n        itemMethod: props.tabItemMethod || props.itemMethod\n      })\n\n      // 准备内容数据\n      contentData.push({\n        index: ii,\n        path: item.path,\n        idf: item.idf,\n        content: item.content\n      })\n    })\n\n    this.saxer.append({\n      MenuData: menuData,\n      ContentData: contentData\n    })\n  }\n\n  createMenu(){\n    const props = this.props\n    const menu_data = this.saxer.get().MenuData\n    return <TabsMenus\n      data={menu_data}\n      itemClass={props.itemClass}\n      itemMethod={props.navItemMethod || props.tapItemMethod || props.tabItemMethod || props.itemMethod}\n      header={props.treeHeader}\n      footer={props.treeFooter}\n      select={this.state.select}\n    />\n  }\n\n  getContent(id){\n    const select = this.state.select\n    const contents = this.saxer.get().ContentData\n    const stateContents = this.state.data\n    let _contents = []\n    let selectContent\n\n    if (this.props.mulitple) {\n      contents.forEach( (item, ii) => {\n        if (!item.idf) {\n          _contents.push({\n            title: item.content,\n            itemClass: (id && item.path && item.path == id) ? 'select' : item.index == id ? 'select' : (item.index == select || item.path == select) ? 'select' : ''\n          })\n        }\n      })\n      return <Aotoo.list data={_contents}/>\n    }\n\n    contents.forEach( item => {\n      if ( (id||id==0)) {\n        if (item.path == id || item.index == id) {\n          selectContent = item.content || stateContents[item.index]['content']\n        }\n      } else {\n        if (item.index == select || item.path == select) {\n          selectContent = item.content || stateContents[item.index]['content']\n        }\n      }\n    })\n    return selectContent\n  }\n\n  render(){\n    let content = this.getContent()\n    let jsxMenu = this.createMenu()\n    let myJsxMenu = <div className='tabsMenus'>{jsxMenu}</div>\n\n    let thisConfig = this.config\n    if (thisConfig.iscrollConfig && typeof thisConfig.iscrollConfig == 'object') {\n      let IscrollTreeMenu = Aotoo.iscroll(\n        <div className='tabsMenus'>{jsxMenu}</div>, \n        thisConfig.iscrollConfig\n      )\n      myJsxMenu = <IscrollTreeMenu />\n    }\n\n    if (typeof content == 'function') {\n      content = content(this.state.selectData)\n    }\n\n    const cls = !this.props.tabClass ? 'tabsGroup ' : 'tabsGroup ' + this.props.tabClass\n    const boxes_cls = !this.props.mulitple ? 'tabsBoxes' : 'tabsBoxes mulitple'\n\n    return (\n      <div className={cls}>\n        { this.state.showMenu ? myJsxMenu : '' }\n        <div className={boxes_cls}>{content}</div>\n      </div>\n    )\n  }\n}\n\nAotoo.extend('tabs', function(params, utile){\n  let dft = {\n    props: {\n      tabClass: 'tabsGroupX',\n      mulitple: false,\n      tabItemMethod: undefined,\n      showMenu: true\n    },\n    iscrollConfig: undefined\n  }\n  if (params && params.props && params.props.itemMethod) {\n    params.props.tabItemMethod = params.props.itemMethod\n    delete params.props.itemMethod\n  }\n  dft = utile.merge({}, dft, params)\n\n  const Action = {\n    UPDATE: function(ostate, opts){\n      let state = this.curState\n      state.data = opts.data\n      return state\n    },\n    SELECT: function(ostate, opts={}){\n      let state = this.curState\n      if (typeof opts=='string' || typeof opts=='number') {\n        opts = {select: opts}\n      }\n      state.select = opts.select\n      state.selectData = opts.selectData\n      if (typeof opts.cb == 'function') {\n        setTimeout(function() {\n          opts.cb()\n        }, 50);\n      }\n      return state\n    },\n  }\n\n  const myTabs = Aotoo(Tabs, Action, dft)\n  myTabs.setProps = function(options){\n    if (options.itemMethod) {\n      options.tabItemMethod = options.itemMethod\n      delete options.itemMethod\n      myTabs.config = utile.merge({}, myTabs.config, {props: options})\n    }\n  }\n  return myTabs\n})"]}