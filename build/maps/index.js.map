{"version":3,"sources":["index.js"],"names":["TabsMenus","props","myProps","data","map","className","item","itemClass","index","select","path","replace","Tabs","state","start","selectData","showMenu","prepaireData","bind","createMenu","getContent","that","menuData","contentData","forEach","ii","push","title","idf","parent","attr","itemMethod","tabItemMethod","content","saxer","append","MenuData","ContentData","menu_data","get","treeHeader","treeFooter","id","contents","_contents","selectContent","mulitple","jsxMenu","cls","tabClass","boxes_cls","React","Component","Aotoo","extend","params","utile","dft","undefined","merge","Action","UPDATE","ostate","opts","curState","SELECT","cb","setTimeout","myTabs","setProps","options","config"],"mappings":"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","file":"../index.js","sourcesContent":["const TabsMenus = (props) => {\n  let myProps = {...props}\n  myProps.data = myProps.data.map( item => {\n    const className = item.itemClass||''\n    if (item.index == myProps.select || item.path == myProps.select) {\n      item.itemClass = className ? className + \" select\" : \"select\"\n    } else {\n      item.itemClass = className.replace(/( *)select/g, '')\n    }\n    return item\n  })\n  return <Aotoo.tree {...myProps}/>\n}\n\nexport class Tabs extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      data: this.props.data||[],\n      select: this.props.select||this.props.start||0,\n      selectData: {},\n      showMenu: this.props.showMenu,\n    }\n\n    this.prepaireData = this.prepaireData.bind(this)\n    this.createMenu = this.createMenu.bind(this)\n    this.getContent = this.getContent.bind(this)\n  }\n\n  componentWillMount() {\n    this.prepaireData(this.state)\n  }\n  \n  prepaireData(state){\n    const that = this\n    const props = this.props\n    \n    let menuData = []\n    let contentData = []\n    state.data.forEach( (item, ii) => {\n      // 准备菜单数据\n      menuData.push({\n        index: ii,\n        path: item.path,\n        title: item.title,\n        idf: item.idf,\n        parent: item.parent,\n        attr: item.attr,\n        itemClass: props.itemClass,\n        itemMethod: props.tabItemMethod || props.itemMethod\n      })\n\n      // 准备内容数据\n      contentData.push({\n        index: ii,\n        path: item.path,\n        idf: item.idf,\n        content: item.content\n      })\n    })\n\n    this.saxer.append({\n      MenuData: menuData,\n      ContentData: contentData\n    })\n  }\n\n  createMenu(){\n    const props = this.props\n    const menu_data = this.saxer.get().MenuData\n    return <TabsMenus\n      data={menu_data}\n      itemClass={props.itemClass}\n      itemMethod={props.tabItemMethod || props.itemMethod}\n      header={props.treeHeader}\n      footer={props.treeFooter}\n      select={this.state.select}\n    />\n  }\n\n  getContent(id){\n    const select = this.state.select\n    const contents = this.saxer.get().ContentData\n    let _contents = []\n    let selectContent\n\n    if (this.props.mulitple) {\n      contents.forEach( (item, ii) => {\n        if (!item.idf) {\n          _contents.push({\n            title: item.content,\n            itemClass: (id&&item.path&&item.path == id) ? 'select' : item.index == id ? 'select' : item.index == select ? 'select' : ''\n          })\n        }\n      })\n      return <Aotoo.list data={_contents}/>\n    }\n\n    contents.forEach( item => {\n      if ( (id||id==0)) {\n        if (item.path == id || item.index == id) {\n          selectContent = item.content\n        }\n      } else {\n        if (item.index == select) {\n          selectContent = item.content\n        }\n      }\n    })\n    return selectContent\n  }\n\n  render(){\n    let content = this.getContent()\n    const jsxMenu = this.createMenu()\n    if (typeof content == 'function') {\n      content = content(this.state.selectData)\n    }\n\n    const cls = !this.props.tabClass ? 'tabsGroup ' : 'tabsGroup ' + this.props.tabClass\n    const boxes_cls = !this.props.mulitple ? 'tabsBoxes' : 'tabsBoxes mulitple'\n\n    return (\n      <div className={cls}>\n        { this.state.showMenu ? <div className='tabsMenus'>{jsxMenu}</div> : '' }\n        <div className={boxes_cls}>{content}</div>\n      </div>\n    )\n  }\n}\n\nAotoo.extend('tabs', function(params, utile){\n  let dft = {\n    props: {\n      tabClass: 'tabsGroupX',\n      mulitple: false,\n      tabItemMethod: undefined,\n      showMenu: true\n    }\n  }\n  if (params.props && params.props.itemMethod) {\n    params.props.tabItemMethod = params.props.itemMethod\n    delete params.props.itemMethod\n  }\n  dft = utile.merge({}, dft, params)\n\n  const Action = {\n    UPDATE: function(ostate, opts){\n      let state = this.curState\n      state.data = opts.data\n      return state\n    },\n    SELECT: function(ostate, opts){\n      let state = this.curState\n      state.select = opts.select\n      if (typeof opts.cb == 'function') {\n        setTimeout(function() {\n          opts.cb()\n        }, 100);\n      }\n      return state\n    },\n  }\n\n  const myTabs = Aotoo(Tabs, Action, dft)\n  myTabs.setProps = function(options){\n    if (options.itemMethod) {\n      options.tabItemMethod = options.itemMethod\n      delete options.itemMethod\n      myTabs.config = utile.merge({}, myTabs.config, {props: options})\n    }\n  }\n  return myTabs\n})"]}