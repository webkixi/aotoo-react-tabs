{"version":3,"sources":["index.js"],"names":["Tabs","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","Object","getPrototypeOf","call","state","data","select","start","selectData","showMenu","prepaireData","bind","createMenu","getContent","nextProps","nextState","propsItemClass","itemClass","menuData","contentData","forEach","item","ii","itemCls","push","index","path","title","idf","parent","attr","itemMethod","tabItemMethod","that","content","MenuData","ContentData","get","tree","header","treeHeader","footer","treeFotter","id","append","saxer","selectContent","contents","_contents","menu_data","MenuJsx","treeMenu","cls","list","tabClass","React","createElement","className","jsxMenu","boxes_cls","Component","dft","mulitple","opts","Action","UPDATE","ostate","curState","SELECT","cb","myTabs","Aotoo","setProps","options","config","utile","merge"],"mappings":"m7BAIaA,aAAAA,iBACX,SAAAA,EAAYC,GAAMC,gBAAAC,KAAAH,GAAA,IAAAI,EAAAC,2BAAAF,MAAAH,EAAAM,WAAAC,OAAAC,eAAAR,IAAAS,KAAAN,KACVF,IADU,OAEhBG,EAAKM,OACHC,KAAMP,EAAKH,MAAMU,SACjBC,OAAQR,EAAKH,MAAMW,QAAQR,EAAKH,MAAMY,OAAO,EAC7CC,cACAC,SAAUX,EAAKH,MAAMc,WAAU,GAXrCX,EAAAY,aAAAZ,EAAAY,aAAAC,KAAAb,GAeIA,EAAKc,WAAad,EAAKc,WAAWD,KAAhBb,GAClBA,EAAKe,WAAaf,EAAKe,WAAWF,KAAhBb,GAXFA,mFAehBD,KAAKa,aAAab,KAAKO,mDAGLU,EAAWC,GAlBblB,KAAAa,aAAAK,wCASXL,GACL,IACKG,EAAAA,KAAalB,MAXFqB,EAAArB,EAAAsB,UAAAtB,EAAAsB,UAAA,IAAA,GAYjBC,KAqBKC,KACJf,EAAMC,KAAKe,QAAS,SAACC,EAAMC,GACzB,IAAMC,EAAUD,GAAMlB,EAAME,OACxBe,EAAKJ,UAAYD,EAtBJK,EAAAJ,UAAA,UAAAD,EAAA,SACnBK,EAAKX,UAAaM,EAAlBK,EAAAJ,UAAAD,EAyBEE,EAASM,MACPC,MAAOH,EAtBXI,KAAKhB,EAAAA,KACNiB,MAAAN,EAAAM,MAwBKC,IAAKP,EAAKO,IAtBhBC,OAAAR,EAAAQ,OAwBMC,KAAMT,EAAKS,KACXb,UAAWM,EACXQ,WAAYV,EAAKW,gBAInBb,EAAYK,MACVC,MAAOH,EACPI,KAAML,EAAKK,KAzBfE,IAAMK,EAAOL,IACbM,QAAMvC,EAAQuC,YAId9B,KAAAA,MAAMC,QACJ8B,SAAMZ,EA2BNa,YAAajB,IArBXM,KAAAA,kDAIAI,IAAAA,EAAQR,KAAKQ,MALDQ,MAAAF,SAMZL,EAAWA,KANCQ,MAOZrB,KAAAA,EACAc,UAAAA,KAAYV,MAAKW,UARLD,WAAAlC,KAAAF,MAAAqC,cAkCdO,OAAQ1C,KAAKF,MAAM6C,WAvBnBC,OAAA5C,KAAAF,MAAA+C,aAGEhB,KAAAA,MAAAA,QACAE,QAAKP,uCA4BAsB,GAvBT,IAAArC,EAAWsC,KAAOxC,MAAAE,OAChB6B,EAAUjB,KADM2B,MAAAR,MAAAD,YAEhBA,KAFFU,OAAAA,EAKA,OAAAjD,KAAKe,MAAAA,UACNmC,EAAA3B,QAAA,SAAAC,EAAAC,GAyBUD,EAAKO,KACRoB,EAAUxB,MACRG,MAAON,EAAKa,QAxBde,UAAYN,GAAKE,EAAMR,MAAMF,EAAAA,MAAnCQ,EAAA,SAAAtB,EAAAI,OAAAkB,EAAA,SAAAtB,EAAAI,OAAAnB,EAAA,SAAA,OAIEyB,KAAAA,MACAQ,KAAAA,MAIFQ,EAAKF,QAAMD,SAAAA,GACTM,GAASC,GAATD,EADF7B,EAAAK,MAAAiB,GAAAtB,EAAAI,OAAAkB,IAGDG,EAAAzB,EAAAa,SA4BSb,EAAKI,OAASnB,IAzBhBA,EAAcF,EAAME,WA8BnBwC,oCAtBDE,IAAAA,EAAAA,KAAUxB,MAAKa,MAAAa,QACbvB,EAAAA,KAAON,aACKsB,mBAAZ1B,IAFaiB,EAAfA,EAAArC,KAAAO,MAAAI,aAMJ,IAAA4C,EAAOvD,KAAKwD,MAAKC,SAAA,aAAAzD,KAAAF,MAAA2D,SAAA,aACfjD,EAAM2C,KAAAA,MAAAA,SAAAA,qBAAAA,YAET,OA2BCO,MAAAC,cAAA,OAAKC,UAAWL,GAzBlBL,KAAS3B,MAAAA,SAASmC,MAAAC,cAAA,OAAAC,UAAQ,aAAAC,GAAA,GACxBH,MAAAC,cAAA,OAAMb,UAAQgB,GAAIzB,WAzGEqB,MAAMK,WA+GtBd,MAAAA,OAAAA,OAAAA,SAAgBzB,EAAKa,GAExB,IAAA2B,GACFlE,OACD2D,SAAOR,aACRgB,UAAA,IA6BGC,EAAKpE,OAASoE,EAAKpE,MA3BfoC,aACNgC,EAAApE,MAAM+D,cAAqBrB,EAAX1C,MAAiBuD,kBAC7BhB,EAAAA,MAAUH,YAEZG,EAAAA,EAAAA,MAAUA,EAAQ6B,GA6BtB,IAAMC,GA1BJC,OAAMb,SAAOc,EAAWZ,GACxB,IAAMK,EAAAA,KAAaQ,SAEnB,OA0BE/D,EAAMC,KAAO0D,EAAK1D,KAzBlBD,GAAAgE,OAAK,SAAWhB,EAAhBW,GACI,IAAA3D,EAAAP,KAAWY,SACb,OADwBL,EAAAE,OAAAyD,EAAAzD,OAAe,mBAAVyD,EAAAM,IAAuBX,WAAAA,WAAlDK,EADJM,MAEE,KAAKjE,IAGVkE,EAAAC,MAAA7E,KAAAsE,EAAAH,GAKD,OA+BAS,EAAOE,SAAW,SAASC,GACrBA,EAAQ1C,aACV0C,EAAQzC,cAAgByC,EAAQ1C,kBA5KN6B,EA6KX7B,WACfuC,EAAOI,OAASC,EAAMC,SAAUN,EAAOI,QAAS/E,MAAO8E,MAnCvDZ","file":"../index.js","sourcesContent":["/**\n * depends Aotoo as global variable\n */\n\nexport class Tabs extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      data: this.props.data||[],\n      select: this.props.select||this.props.start||0,\n      selectData: {},\n      showMenu: this.props.showMenu||true,\n    }\n\n    this.prepaireData = this.prepaireData.bind(this)\n    this.createMenu = this.createMenu.bind(this)\n    this.getContent = this.getContent.bind(this)\n  }\n\n  componentWillMount() {\n    this.prepaireData(this.state)\n  }\n\n  componentWillUpdate(nextProps, nextState){\n    this.prepaireData(nextState)\n  }\n\n  /**\n   * [\n   *   {title, content, idf, parent, attr, path},\n   *   {title, content, idf, parent, attr, path},\n   * ]\n   */\n  prepaireData(state){\n    const that = this\n    const props = this.props\n    const propsItemClass = props.itemClass ? props.itemClass + ' ' : ''\n    let menuData = []\n    let contentData = []\n    state.data.forEach( (item, ii) => {\n      const itemCls = ii == state.select\n        ? item.itemClass ? propsItemClass+item.itemClass+' select' : propsItemClass+'select'\n        : item.itemClass ? propsItemClass+item.itemClass : propsItemClass\n\n      // 准备菜单数据\n      menuData.push({\n        index: ii,\n        path: item.path,\n        title: item.title,\n        idf: item.idf,\n        parent: item.parent,\n        attr: item.attr,\n        itemClass: itemCls,\n        itemMethod: item.tabItemMethod\n      })\n\n      // 准备内容数据\n      contentData.push({\n        index: ii,\n        path: item.path,\n        idf: item.idf,\n        content: item.content\n      })\n    })\n\n    this.saxer.append({\n      MenuData: menuData,\n      ContentData: contentData\n    })\n\n    this.createMenu()\n  }\n\n  createMenu(){\n    const menu_data = this.saxer.get().MenuData\n    const treeMenu = this.tree({\n      data: menu_data,\n      itemClass: this.props.itemClass,\n      itemMethod: this.props.tabItemMethod,\n      header: this.props.treeHeader,\n      footer: this.props.treeFotter\n    })\n\n    this.saxer.append({\n      MenuJsx: treeMenu\n    })\n  }\n\n  getContent(id){\n    const select = this.state.select\n    const contents = this.saxer.get().ContentData\n    let _contents = []\n    let selectContent\n\n    if (this.props.mulitple) {\n      contents.forEach( (item, ii) => {\n        if (!item.idf) {\n          _contents.push({\n            title: item.content,\n            itemClass: (id&&item.path&&item.path == id) ? 'select' : item.index == id ? 'select' : item.index == select ? 'select' : ''\n          })\n        }\n      })\n      return this.list({\n        data: _contents\n      })\n    }\n\n    contents.forEach( item => {\n      if ( (id||id==0)) {\n        if (item.path == id || item.index == id) {\n          selectContent = item.content\n        }\n      } else {\n        if (item.index == select) {\n          selectContent = item.content\n        }\n      }\n    })\n    return selectContent\n  }\n\n  render(){\n    const jsxMenu = this.saxer.get().MenuJsx\n    let content = this.getContent()\n    if (typeof content == 'function') {\n      content = content(this.state.selectData)\n    }\n\n    const cls = !this.props.tabClass ? 'tabsGroup ' : 'tabsGroup ' + this.props.tabClass\n    const boxes_cls = !this.props.mulitple ? 'tabsBoxes' : 'tabsBoxes mulitple'\n\n    return (\n      <div className={cls}>\n        { this.state.showMenu ? <div className='tabsMenus'>{jsxMenu}</div> : '' }\n        <div className={boxes_cls}>{content}</div>\n      </div>\n    )\n  }\n}\n\nAotoo.extend('tabs', function(opts, utile){\n\n  let dft = {\n    props: {\n      tabClass: 'tabsGroupX',\n      mulitple: false\n    }\n  }\n  if (opts.props && opts.props.itemMethod) {\n    opts.props.tabItemMethod = opts.props.itemMethod\n    delete opts.props.itemMethod\n  }\n  opts = utile.merge(dft, opts)\n\n  const Action = {\n    UPDATE: function(ostate, opts){\n      let state = this.curState\n      state.data = opts.data\n      return state\n    },\n    SELECT: function(ostate, opts){\n      let state = this.curState\n      state.select = opts.select\n      if (typeof opts.cb == 'function') {\n        setTimeout(function() {\n          opts.cb()\n        }, 100);\n      }\n      return state\n    },\n  }\n\n  const myTabs = Aotoo(Tabs, Action, dft)\n  myTabs.setProps = function(options){\n    if (options.itemMethod) {\n      options.tabItemMethod = options.itemMethod\n      delete options.itemMethod\n      myTabs.config = utile.merge({}, myTabs.config, {props: options})\n    }\n  }\n  return myTabs\n})\n\n\n\n// import css style\n// require('./tabs.styl')\n\n\n// demo\n// const WrapElement = Aotoo.wrap(\n//   <div>这个真好吃</div>, {\n//     rendered: function(dom){\n//       console.log('========= rendered');\n//     },\n//     leave: function(){\n//       console.log('========= leave');\n//     }\n//   }\n// )\n\n// function mkTabs(opts){\n//   const dft = {\n//     props: {\n//       mulitple: false,\n//       data: [],\n//       tabClass: 'tabs-nornal-top'\n//     }\n//   }\n//   // if (){}\n// }\n\n// const tabs = Aotoo.tabs({\n//   props: {\n//     mulitple: true,         //默认为false ,为true时，组件里所有content都会显示\n//     // tabClass: 'tabs-nornal',\n//     // tabClass: 'tabs-floor-left',\n//     tabClass: 'tabs-nornal-top',\n//     data: [\n//       // {title: 'aaa', content: '什么', idf: 'le1', itemClass: 'aabbcc'},\n//       {title: 'aaa', content: '什么, what'},\n//       {title: 'bbb', content: '来了'},\n//       {title: 'ccc', content: <WrapElement />},\n//     ]\n//   }\n// })\n\n\n// const $ = require('jquery')\n// // //用于tabs-floor-left\n// // tabs.render('test', function(dom){\n// //   $(dom).find('.tabsMenus li:not(.itemroot)').click(function(){\n// //     let index = $(this).attr('data-treeid')\n// //     let num = parseInt(index) + 1\n// //     tabs.$select({\n// //       select: index\n// //     })\n// //     let target_top = $(this).parents('.tabsMenus').next('.mulitple').find('>ul>li:nth-child('+num+')').offset().top\n// //     $(\"html,body\").animate({scrollTop: target_top}, 500)\n// //   })\n// // })\n// tabs.render('test', function(dom){\n//   $(dom).find('.tabsMenus li:not(.itemroot)').click(function(){\n//     let index = $(this).attr('data-treeid')\n//     let num = parseInt(index) + 1     // mlitple = false  ,tabClass: 'tabs-nornal-top',\n//     tabs.$select({\n//       select: index,\n//       cb: function(){ }\n//     })\n//     // let target_top = $(this).parents('.tabsMenus').next('.tabsBoxes').offset().top     //适合于 mlitple = true，tabClass: 'tabs-nornal-top',\n//     let target_top = $(this).parents('.tabsMenus').next('.mulitple').find('>ul>li:nth-child('+num+')').offset().top - 50   // mlitple = false    50是tabsMenus的高度，tabClass: 'tabs-nornal-top',\n//     $(\"html,body\").animate({scrollTop: target_top}, 500)  //适合于 mlitple = true与false，tabClass: 'tabs-nornal-top',\n//   })\n// })\n"]}